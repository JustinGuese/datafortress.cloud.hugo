{{define "main"}}

<!-- Hero Section with Video -->
{{with .Params.banner}}
<section class="section landing-hero animated-gradient-bg fade-in-up" style="position: relative; z-index: 1; min-height: 90vh; display: flex; align-items: center;">
  <!-- Local particles container for hero -->
  <div id="particles-hero" aria-hidden="true"></div>
  
  <!-- Hero Video Background (optional) -->
  {{if .video}}
  <div class="hero-video-background" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; overflow: hidden; opacity: 0.15;">
    {{ partial "video" (dict "Src" .video "Autoplay" "true" "Loop" "true" "Muted" "true" "Controls" "false" "Class" "w-100 h-100" "Width" "100%" "Height" "100%") }}
  </div>
  {{end}}
  
  <div class="container" style="position: relative; z-index: 3;">
    <div class="row align-items-center justify-content-center">
      <div class="col-lg-10 col-xl-8 text-center">
        <h1 class="section-title h1 holographic fade-in-up mb-4" style="font-size: 3.5rem; font-weight: 700; line-height: 1.2;">{{ .title | markdownify }}</h1>
        <p class="lead mb-5 fade-in-up" style="animation-delay: 0.15s; font-size: 1.5rem;">{{ .content | markdownify }}</p>
        <div class="d-flex flex-wrap justify-content-center gap-3 mb-5 fade-in-up" style="animation-delay: 0.3s;">
          {{if .button_primary.enable}}
          {{with .button_primary}}
          <a href="{{ .link | safeURL }}" title="{{ .label }}" class="btn btn-primary btn-lg magnetic px-5 py-3">{{ .label }} <i class="fas fa-arrow-right ms-2"></i></a>
          {{end}}
          {{end}}
          {{if .button_secondary.enable}}
          {{with .button_secondary}}
          <a href="{{ .link | safeURL }}" title="{{ .label }}" class="btn btn-outline-primary btn-lg magnetic px-5 py-3">{{ .label }}</a>
          {{end}}
          {{end}}
        </div>
        {{if .video}}
        <div class="fade-in-up" style="animation-delay: 0.45s;">
          <div class="has-video rounded-3 shadow-lg glass-card video-container-vertical" style="max-width: 400px; margin: 0 auto; position: relative;">
            {{if hasPrefix .video "http"}}
            <!-- YouTube/External Video -->
            <div class="video-loader">
              <button type="button" aria-label="video play button" class="video-loader-btn rounded-3 magnetic" data-src="{{.video}}">
                <i class="fas fa-play icon-glow" style="font-size: 3rem;"></i>
              </button>
              {{if .video_thumbnail}}
              {{ partial "image" (dict "Src" .video_thumbnail "Alt" "Watch introduction video" "Size" "400x" "Class" "w-100 video-thumb rounded-3") }}
              {{end}}
            </div>
            {{else}}
            <!-- Local Video File - Vertical aspect ratio (9:16) -->
            <div class="position-relative" style="padding-top: 177.78%; background: #000; border-radius: 1rem; overflow: hidden;">
              {{ partial "video" (dict "Src" .video "Controls" "true" "Class" "position-absolute top-0 start-0 w-100 h-100" "Width" "100%" "Height" "100%") }}
            </div>
            {{end}}
          </div>
        </div>
        {{end}}
      </div>
    </div>
  </div>
</section>
{{end}}
<!-- /Hero Section -->

<!-- Trust Bar -->
{{with .Params.trust_bar}}
{{if .enable}}
<section class="section py-4 fade-in-up bg-light">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-3 text-center text-lg-start mb-3 mb-lg-0">
        <p class="mb-0 text-muted small fw-bold">{{.title | markdownify}}</p>
      </div>
      <div class="col-lg-9">
        <div class="swiper brand-carousel">
          <div class="swiper-wrapper">
            {{range .logos}}
            <div class="swiper-slide brand-item d-flex align-items-center justify-content-center scale-in">
              {{ partial "image" (dict "Src" . "Alt" "Client logo" "Size" "x40") }}
            </div>
            {{end}}
          </div>
        </div>
      </div>
    </div>
    {{if .compliance_text}}
    <div class="row mt-3">
      <div class="col-12 text-center">
        <p class="mb-0 small text-muted">{{.compliance_text | markdownify}}</p>
      </div>
    </div>
    {{end}}
  </div>
</section>
{{end}}
{{end}}
<!-- /Trust Bar -->

<!-- Animated Metrics Counter -->
{{with .Params.metrics}}
{{if .enable}}
<section class="section fade-in-up">
  <div class="container">
    <div class="row mb-5">
      <div class="col-lg-8 mx-auto text-center">
        <h2 class="section-title h3 fade-in-up">{{.title | markdownify}}</h2>
        {{if .content}}<p class="fade-in-up" style="animation-delay: 0.15s;">{{.content | markdownify}}</p>{{end}}
      </div>
    </div>
    <div class="row g-4">
      {{range .items}}
      <div class="col-lg-3 col-md-6 fade-in-up">
        <div class="px-4 py-5 rounded-3 glass-card text-center h-100 card-3d is-hoverable">
          <div class="display-4 mb-3">
            <i class="{{.icon}} text-primary icon-glow"></i>
          </div>
          <div class="metric-value h2 mb-2 fw-bold" data-target="{{.stat}}">{{.stat}}</div>
          <p class="mb-0 text-muted">{{.label | markdownify}}</p>
        </div>
      </div>
      {{end}}
    </div>
  </div>
</section>
{{end}}
{{end}}
<!-- /Animated Metrics Counter -->

<!-- Case Studies Section with Videos -->
{{with .Params.case_studies}}
{{if .enable}}
<section class="section bg-light fade-in-up">
  <div class="container">
    <div class="row mb-5">
      <div class="col-lg-8 mx-auto text-center">
        <h2 class="section-title h3 fade-in-up">{{.title | markdownify}}</h2>
        {{if .content}}<p class="fade-in-up" style="animation-delay: 0.15s;">{{.content | markdownify}}</p>{{end}}
      </div>
    </div>
    <div class="row g-5">
      {{range $index, $case := .items}}
      <div class="col-lg-{{if eq (len $.Params.case_studies.items) 1}}12{{else if eq (len $.Params.case_studies.items) 2}}6{{else}}4{{end}} fade-in-up" style="animation-delay: {{mul $index 0.1}}s;">
        <div class="h-100 rounded-3 glass-card overflow-hidden card-3d is-hoverable">
          {{if $case.video}}
          <div class="position-relative case-video-container" style="padding-top: 177.78%; overflow: hidden;">
            {{if hasPrefix $case.video "http"}}
            <!-- YouTube/External Video -->
            <div class="has-video rounded-top video-loader position-absolute top-0 start-0 w-100 h-100">
              <button type="button" aria-label="Play case study video" class="video-loader-btn rounded-top magnetic" data-src="{{$case.video}}">
                <i class="fas fa-play icon-glow"></i>
              </button>
              {{if $case.video_thumbnail}}
              {{ partial "image" (dict "Src" $case.video_thumbnail "Alt" $case.title "Size" "400x" "Class" "w-100 h-100 video-thumb object-fit-cover") }}
              {{else}}
              <div class="w-100 h-100 bg-primary d-flex align-items-center justify-content-center">
                <i class="fas fa-video text-white" style="font-size: 3rem;"></i>
              </div>
              {{end}}
            </div>
            {{else}}
            <!-- Local Video File -->
            <div class="position-absolute top-0 start-0 w-100 h-100 rounded-top overflow-hidden bg-dark">
              {{ partial "video" (dict "Src" $case.video "Controls" "true" "Class" "w-100 h-100" "Width" "100%" "Height" "100%") }}
            </div>
            {{end}}
          </div>
          {{end}}
          <div class="p-4">
            <h3 class="h4 mb-3">{{$case.title | markdownify}}</h3>
            {{if $case.challenge}}
            <div class="mb-3">
              <strong class="text-muted small">Challenge:</strong>
              <p class="mb-0 small">{{$case.challenge | markdownify}}</p>
            </div>
            {{end}}
            {{if $case.solution}}
            <div class="mb-3">
              <strong class="text-muted small">Solution:</strong>
              <p class="mb-0 small">{{$case.solution | markdownify}}</p>
            </div>
            {{end}}
            {{if $case.results}}
            <div class="mb-3">
              <strong class="text-primary small">Results:</strong>
              <p class="mb-0 small fw-bold">{{$case.results | markdownify}}</p>
            </div>
            {{end}}
            {{if $case.cta.enable}}
            {{with $case.cta}}
            <a href="{{.link | safeURL}}" class="btn btn-sm btn-outline-primary magnetic mt-2">{{.label}}</a>
            {{end}}
            {{end}}
          </div>
        </div>
      </div>
      {{end}}
    </div>
  </div>
</section>
{{end}}
{{end}}
<!-- /Case Studies Section -->

<!-- Mid-Page Contact Form -->
{{with .Params.contact_form_mid}}
{{if .enable}}
<section class="section fade-in-up">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="glass-card rounded-3 p-5">
          <div class="text-center mb-4">
            <h2 class="section-title h3 fade-in-up">{{.title | markdownify}}</h2>
            {{if .content}}<p class="fade-in-up" style="animation-delay: 0.15s;">{{.content | markdownify}}</p>{{end}}
          </div>
          <form method="POST" class="row g-4 contact-form-card" action="{{site.Params.contact_form_action | safeURL}}">
            <input type="hidden" name="source" value="enterprise-landing-mid">
            <div class="col-lg-6">
              <label class="mb-1" for="fname-mid">{{ i18n "fname"}} <span class="text-danger">*</span></label>
              <input class="form-control shadow-none" type="text" name="first_name" id="fname-mid" placeholder="{{ i18n `fname`}}" required>
            </div>
            <div class="col-lg-6">
              <label class="mb-1" for="lname-mid">{{ i18n "lname"}} <span class="text-danger">*</span></label>
              <input class="form-control shadow-none" type="text" name="last_name" id="lname-mid" placeholder="{{ i18n `lname`}}" required>
            </div>
            <div class="col-lg-6">
              <label class="mb-1" for="email-mid">{{i18n "email"}} <span class="text-danger">*</span></label>
              <input class="form-control shadow-none" type="email" name="email_address" id="email-mid" placeholder="{{i18n `email`}}" required>
            </div>
            <div class="col-lg-6">
              <label class="mb-1" for="company-mid">Company</label>
              <input class="form-control shadow-none" type="text" name="company" id="company-mid" placeholder="Your Company">
            </div>
            <div class="col-lg-12">
              <label class="mb-1" for="phone-mid">Phone</label>
              <input class="form-control shadow-none" type="tel" name="phone" id="phone-mid" placeholder="Your Phone Number">
            </div>
            <div class="col-lg-12">
              <button class="btn btn-primary btn-lg magnetic w-100" type="submit">{{.button_label | default (i18n "send")}}</button>
            </div>
            <div class="col-lg-12 text-center">
              <a class="btn btn-outline-primary btn-sm mt-2 magnetic" href="https://cal.com/datafortress-justin/15min" target="_blank">Or book a meeting with Cal.com</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
{{end}}
{{end}}
<!-- /Mid-Page Contact Form -->

<!-- Comparison Table -->
{{with .Params.comparison_table}}
{{if .enable}}
<section class="section bg-light fade-in-up">
  <div class="container">
    <div class="row mb-5">
      <div class="col-lg-8 mx-auto text-center">
        <h2 class="section-title h3 fade-in-up">{{.title | markdownify}}</h2>
        {{if .content}}<p class="fade-in-up" style="animation-delay: 0.15s;">{{.content | markdownify}}</p>{{end}}
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="glass-card rounded-3 overflow-hidden">
          <div class="table-responsive">
            <table class="table table-hover mb-0">
              <thead class="bg-primary text-white">
                <tr>
                  <th scope="col" class="border-0">{{.column_1_label | default "Feature"}}</th>
                  <th scope="col" class="border-0 text-center">{{.column_2_label | default "Legacy Systems"}}</th>
                  <th scope="col" class="border-0 text-center">{{.column_3_label | default "DataFortress Solutions"}}</th>
                </tr>
              </thead>
              <tbody>
                {{range .rows}}
                <tr>
                  <td class="fw-bold">{{.feature | markdownify}}</td>
                  <td class="text-center text-muted">{{.legacy | markdownify}}</td>
                  <td class="text-center text-primary fw-bold">{{.datafortress | markdownify}}</td>
                </tr>
                {{end}}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{{end}}
{{end}}
<!-- /Comparison Table -->

<!-- Services Section -->
{{with .Params.services}}
{{if .enable}}
<section class="section fade-in-up">
  <div class="container">
    <div class="row mb-5">
      <div class="col-lg-8 mx-auto text-center">
        <h2 class="section-title h3 fade-in-up">{{.title | markdownify}}</h2>
        {{if .content}}<p class="fade-in-up" style="animation-delay: 0.15s;">{{.content | markdownify}}</p>{{end}}
      </div>
    </div>
    <div class="row g-4">
      {{range $index, $service := .items}}
      <div class="col-lg-4 fade-in-up" style="animation-delay: {{mul $index 0.1}}s;">
        <div class="px-4 py-5 rounded-3 glass-card h-100 card-3d is-hoverable">
          <div class="display-3 mb-4">
            <i class="{{$service.icon}} text-primary icon-glow"></i>
          </div>
          <h3 class="h4 mb-3">{{$service.title | markdownify}}</h3>
          <div class="content">{{$service.content | markdownify}}</div>
        </div>
      </div>
      {{end}}
    </div>
  </div>
</section>
{{end}}
{{end}}
<!-- /Services Section -->

<!-- FAQ Section -->
{{with .Params.faq}}
{{if .enable}}
<section class="section bg-light fade-in-up">
  <div class="container">
    <div class="row mb-5">
      <div class="col-lg-8 mx-auto text-center">
        <h2 class="section-title h3 fade-in-up">{{.title | markdownify}}</h2>
        {{if .content}}<p class="fade-in-up" style="animation-delay: 0.15s;">{{.content | markdownify}}</p>{{end}}
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="accordion" id="faqAccordion">
          {{range $index, $item := .items}}
          <div class="accordion-item glass-card border-0 mb-3 rounded-3">
            <h2 class="accordion-header" id="faqHeading{{$index}}">
              <button class="accordion-button {{if ne $index 0}}collapsed{{end}} rounded-3" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse{{$index}}" aria-expanded="{{if eq $index 0}}true{{else}}false{{end}}" aria-controls="faqCollapse{{$index}}">
                {{$item.question | markdownify}}
              </button>
            </h2>
            <div id="faqCollapse{{$index}}" class="accordion-collapse collapse {{if eq $index 0}}show{{end}}" aria-labelledby="faqHeading{{$index}}" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                {{$item.answer | markdownify}}
              </div>
            </div>
          </div>
          {{end}}
        </div>
      </div>
    </div>
  </div>
</section>
{{end}}
{{end}}
<!-- /FAQ Section -->

<!-- Final Contact Form -->
{{with .Params.contact_form_final}}
{{if .enable}}
<section id="contact-form-final" class="section fade-in-up">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="glass-card rounded-3 p-5">
          <div class="text-center mb-4">
            <h2 class="section-title h3 fade-in-up">{{.title | markdownify}}</h2>
            {{if .content}}<p class="fade-in-up" style="animation-delay: 0.15s;">{{.content | markdownify}}</p>{{end}}
          </div>
          <form method="POST" class="row g-4 contact-form-card" action="{{site.Params.contact_form_action | safeURL}}">
            <input type="hidden" name="source" value="enterprise-landing-final">
            <div class="col-lg-6">
              <label class="mb-1" for="fname-final">{{ i18n "fname"}} <span class="text-danger">*</span></label>
              <input class="form-control shadow-none" type="text" name="first_name" id="fname-final" placeholder="{{ i18n `fname`}}" required>
            </div>
            <div class="col-lg-6">
              <label class="mb-1" for="lname-final">{{ i18n "lname"}} <span class="text-danger">*</span></label>
              <input class="form-control shadow-none" type="text" name="last_name" id="lname-final" placeholder="{{ i18n `lname`}}" required>
            </div>
            <div class="col-lg-12">
              <label class="mb-1" for="email-final">{{i18n "email"}} <span class="text-danger">*</span></label>
              <input class="form-control shadow-none" type="email" name="email_address" id="email-final" placeholder="{{i18n `email`}}" required>
            </div>
            <div class="col-lg-6">
              <label class="mb-1" for="company-final">Company</label>
              <input class="form-control shadow-none" type="text" name="company" id="company-final" placeholder="Your Company">
            </div>
            <div class="col-lg-6">
              <label class="mb-1" for="phone-final">Phone</label>
              <input class="form-control shadow-none" type="tel" name="phone" id="phone-final" placeholder="Your Phone Number">
            </div>
            <div class="col-lg-12">
              <label class="mb-1" for="message-final">{{i18n "message"}}</label>
              <textarea class="form-control shadow-none" name="message" id="message-final" rows="4" placeholder="{{i18n `message`}}"></textarea>
            </div>
            <div class="col-lg-12">
              <button class="btn btn-primary btn-lg magnetic w-100" type="submit">{{.button_label | default (i18n "send")}}</button>
            </div>
            <div class="col-lg-12 text-center">
              <a class="btn btn-outline-primary btn-sm mt-2 magnetic" href="https://cal.com/datafortress-justin/15min" target="_blank">Or book a meeting with Cal.com</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
{{end}}
{{end}}
<!-- /Final Contact Form -->

<!-- Final CTA Section -->
{{with .Params.final_cta}}
{{if .enable}}
<section class="section animated-gradient-bg fade-in-up">
  <div class="container">
    <div class="row align-items-center justify-content-center text-center">
      <div class="col-lg-8">
        <h2 class="section-title h2 holographic fade-in-up mb-4">{{ .title | markdownify }}</h2>
        {{with .content }}<p class="mb-4 fade-in-up" style="animation-delay: 0.15s; font-size: 1.25rem;">{{ . | markdownify }}</p>{{ end }}
        {{ if .button.enable }}
        {{ with .button }}
        <a href="{{ .link | safeURL }}" title="{{ .label }}" class="btn btn-primary btn-lg magnetic fade-in-up px-5 py-3" style="animation-delay: 0.3s;">{{ .label }} <i class="fas fa-arrow-right ms-2"></i></a>
        {{ end }}
        {{ end }}
      </div>
    </div>
  </div>
</section>
{{end}}
{{end}}
<!-- /Final CTA Section -->

<!-- Sticky Floating CTA Button -->
<div id="sticky-cta" class="sticky-cta-button fade-in-up" style="display: none; position: fixed; bottom: 30px; right: 30px; z-index: 9999;">
  <a href="https://cal.com/datafortress-justin/15min" target="_blank" class="btn btn-primary btn-lg magnetic rounded-circle shadow-lg" style="width: 70px; height: 70px; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3);" title="Book Free Strategy Call">
    <i class="fas fa-calendar-alt" style="font-size: 1.5rem;"></i>
  </a>
</div>

<style>
/* Responsive improvements for landing page */
@media (max-width: 991px) {
  .landing-hero h1 {
    font-size: 2.5rem !important;
  }
  .landing-hero .lead {
    font-size: 1.25rem !important;
  }
  #sticky-cta {
    bottom: 20px;
    right: 20px;
  }
  #sticky-cta .btn {
    width: 60px !important;
    height: 60px !important;
  }
  #sticky-cta .btn i {
    font-size: 1.25rem !important;
  }
}

@media (max-width: 575px) {
  .landing-hero h1 {
    font-size: 2rem !important;
  }
  .landing-hero .lead {
    font-size: 1.1rem !important;
  }
  .hero-video-background {
    display: none; /* Hide background video on mobile for performance */
  }
}

/* Ensure video thumbnails are responsive */
.video-thumb {
  object-fit: cover;
}

/* Vertical video container styling */
.video-container-vertical {
  max-width: 400px;
}

.video-container-vertical .video-loader {
  position: relative;
  padding-top: 177.78%; /* 9:16 aspect ratio for vertical videos */
  overflow: hidden;
  border-radius: 1rem;
}

.video-container-vertical .video-loader-btn {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  background: rgba(0, 0, 0, 0.5);
  border: none;
  padding: 1.5rem;
}

.video-container-vertical .video-thumb {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 1rem;
}

/* Case study video containers */
.case-video-container {
  position: relative;
}

.case-video-container .video-thumb {
  object-fit: cover;
}

@media (max-width: 991px) {
  .video-container-vertical {
    max-width: 350px;
  }
}

@media (max-width: 575px) {
  .video-container-vertical {
    max-width: 300px;
  }
}

</style>

<script>
// Animated counter for metrics
document.addEventListener('DOMContentLoaded', function() {
  // Counter animation
  const counters = document.querySelectorAll('.metric-value');
  const animateCounter = (counter) => {
    const target = counter.getAttribute('data-target');
    const isPercentage = target.includes('%');
    const isPlus = target.includes('+');
    const numericValue = parseFloat(target.replace(/[^0-9.]/g, ''));
    
    if (isNaN(numericValue)) {
      counter.textContent = target;
      return;
    }
    
    let current = 0;
    const increment = numericValue / 50;
    const timer = setInterval(() => {
      current += increment;
      if (current >= numericValue) {
        counter.textContent = (isPlus ? '+' : '') + numericValue + (isPercentage ? '%' : '');
        clearInterval(timer);
      } else {
        counter.textContent = (isPlus ? '+' : '') + Math.floor(current) + (isPercentage ? '%' : '');
      }
    }, 30);
  };
  
  // Intersection Observer for counters
  const observerOptions = {
    threshold: 0.5,
    rootMargin: '0px'
  };
  
  const counterObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting && !entry.target.classList.contains('counted')) {
        entry.target.classList.add('counted');
        animateCounter(entry.target);
      }
    });
  }, observerOptions);
  
  counters.forEach(counter => {
    counterObserver.observe(counter);
  });
  
  // Sticky CTA button
  const stickyCTA = document.getElementById('sticky-cta');
  if (stickyCTA) {
    const showStickyCTA = () => {
      if (window.scrollY > 500) {
        stickyCTA.style.display = 'block';
      } else {
        stickyCTA.style.display = 'none';
      }
    };
    
    window.addEventListener('scroll', showStickyCTA);
    showStickyCTA();
  }
});
</script>

{{end}}
