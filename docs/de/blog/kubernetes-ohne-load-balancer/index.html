<!doctype html><html><head><title>Maximierung der Kosteneinsparungen in der Cloud: Wie man Kubernetes ohne Load Balancer betreibt</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="index, follow"><meta name=description content="Entdecken Sie kostensparende Tipps für Ihren Kubernetes-Cluster, von der Verwendung eines Load Balancers bis hin zur völligen Abschaffung."><link rel=canonical href=https://datafortress.cloud/de/blog/kubernetes-ohne-load-balancer/><link rel=alternate href=https://datafortress.cloud/de/blog/kubernetes-ohne-load-balancer/ hreflang=de-de><link rel=icon type=image/png href=https://datafortress.cloud/images/logo.webp><meta property="og:title" content="Maximierung der Kosteneinsparungen in der Cloud: Wie man Kubernetes ohne Load Balancer betreibt"><meta property="og:description" content="Entdecken Sie kostensparende Tipps für Ihren Kubernetes-Cluster, von der Verwendung eines Load Balancers bis hin zur völligen Abschaffung."><meta property="og:type" content="article"><meta property="og:url" content="https://datafortress.cloud/de/blog/kubernetes-ohne-load-balancer/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-01-18T07:10:46+02:00"><meta property="article:modified_time" content="2023-02-10T18:23:48+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Maximierung der Kosteneinsparungen in der Cloud: Wie man Kubernetes ohne Load Balancer betreibt"><meta name=twitter:description content="Entdecken Sie kostensparende Tipps für Ihren Kubernetes-Cluster, von der Verwendung eines Load Balancers bis hin zur völligen Abschaffung."><script type=application/ld+json>{"@context":"https://schema.org/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/datafortress.cloud\/de\/blog\/kubernetes-ohne-load-balancer\/"},"headline":"Maximierung der Kosteneinsparungen in der Cloud: Wie man Kubernetes ohne Load Balancer betreibt","description":"Entdecken Sie kostensparende Tipps für Ihren Kubernetes-Cluster, von der Verwendung eines Load Balancers bis hin zur völligen Abschaffung.","image":[],"datePublished":"2023-01-18T07:10:46\u002b02:00","dateModified":"2023-02-10T18:23:48\u002b01:00","author":{"@type":"Person","name":"Justin Guese"},"publisher":{"@type":"Organization","name":"Datafortress.cloud","logo":{"@type":"ImageObject","url":"https:\/\/datafortress.cloud\/images\/logo.webp"}}}</script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.1/css/all.css integrity=sha384-xxzQGERXS00kBmZW/6qxqJPyxW3UR0BPsL4c8ILaIWXva5kFi7TxkIIaMiKtqV1Q crossorigin=anonymous><link rel=stylesheet href=https://datafortress.cloud//css/style.css><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js></script></head><body><header><nav class=navbar><div class=navbar-brand><a class=navbar-item href=https://datafortress.cloud/ title=Datafortress.cloud><img src=https://datafortress.cloud/images/logo.webp alt="VR, Big-Data and Cloud for your Business."></a>
<a href=https://datafortress.cloud/ title="VR, Big-Data and Cloud for your Business." class=navbar-item><span class=is-size-4>Datafortress.cloud</span></a>
<a href=https://datafortress.cloud/contact class=navbar-item title="RSS feed"><span class="icon fa-lg has-text-dark"><i class="fa fa-envelope"></i></span></a>
<a href=https://datafortress.cloud/index.xml class=navbar-item title="RSS feed"><span class="icon fa-lg has-text-dark"><i class="fa fa-rss"></i></span></a>
<a role=button class=navbar-burger aria-label=menu aria-expanded=false><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div class="navbar-menu navbar-end"><a href=https://datafortress.cloud/products class=navbar-item>Products</a>
<a href=https://datafortress.cloud/services class=navbar-item>Services</a>
<a href=https://datafortress.cloud/project class=navbar-item>Portfolio</a>
<a href=https://datafortress.cloud/blog class=navbar-item>Blog</a>
<a href=https://datafortress.cloud/contact class=navbar-item>Contact</a>
<a href=https://datafortress.cloud/ class=navbar-item>about</a></div></nav><script>$(document).ready(function(){$(".navbar-burger").click(function(){$(".navbar-burger").toggleClass("is-active"),$(".navbar-menu").toggleClass("is-active")})})</script></header><main><article><div class="columns is-centered"><div class="column max-800px"><section class=section><h1 class="title is-2">Maximierung der Kosteneinsparungen in der Cloud: Wie man Kubernetes ohne Load Balancer betreibt</h1><div class="columns is-tablet"><div class="columns is-mobile"><div class="column is-narrow"><figure class="image is-64x64"><img class=is-rounded src=https://datafortress.cloud/images/logo.webp alt="Justin Guese" title="Justin Guese"></figure></div><div class=column><p>Justin Guese |
<time datetime=2023-01-18>18 January 2023</time><br><time datetime=2023-02-10><span class=has-text-grey-light>Last Updated | 10 February 2023</span></time><br><span class=has-text-grey-light>957 words | 5 minutes</span></p></div></div></div><div class="tags is-pulled-left"><a class="tag is-primary" href=https://datafortress.cloud/categories/private-cloud/>Private cloud</a>
<a class="tag is-primary" href=https://datafortress.cloud/categories/kubernetes/>Kubernetes</a></div><div class="tags is-pulled-right"><a class="tag is-info" href=https://datafortress.cloud/tags/private-cloud/>private cloud</a>
<a class="tag is-info" href=https://datafortress.cloud/tags/kubernetes/>kubernetes</a></div></section><section class=content><h1 id=maximierung-der-kosteneinsparungen-in-der-cloud-wie-man-kubernetes-ohne-load-balancer-betreibt>Maximierung der Kosteneinsparungen in der Cloud: Wie man Kubernetes ohne Load Balancer betreibt</h1><p>Beim Betrieb von Kubernetes in der Cloud kann einer der größten Kostenfaktoren die Verwendung eines Load Balancers für jeden Dienst sein. Bei Preisen ab etwa 15 US-Dollar pro Monat pro Load Balancer können sich die Kosten schnell summieren, vor allem, wenn Sie eine große Anzahl von Pods haben. Aber was wäre, wenn wir Ihnen sagen würden, dass es einen Weg gibt, Kubernetes ohne Load Balancer zu betreiben und trotzdem die Vorteile von Hochverfügbarkeit und automatischem Failover zu nutzen? In diesem Artikel zeigen wir Ihnen, wie Sie Kosteneinsparungen in der Cloud erzielen können, indem Sie Kubernetes ohne Load Balancer betreiben.</p><h2 id=version-1-nginx-ingress-mit-cert-manager-zur-verwendung-von-nur-einem-load-balancer>Version 1: Nginx Ingress mit Cert Manager zur Verwendung von nur einem Load Balancer</h2><p>Eine kostensparende Strategie besteht darin, nur einen Load Balancer für den gesamten Cluster zu verwenden, anstatt einen separaten Load Balancer für jeden Dienst. Dies kann durch die Verwendung eines <a href=https://kubernetes.github.io/ingress-nginx/>Nginx Ingress</a> erreicht werden, der als einziger Eingangspunkt für den gesamten externen Verkehr zum Cluster fungiert. Der Nginx Ingress verteilt dann den Datenverkehr auf der Grundlage des Domänennamens an die entsprechenden Pods, anstatt einen Load Balancer pro Dienst zu erstellen.
Das Beste daran: Wenn Sie <a href=https://cert-manager.io/docs/installation/helm/>cert manager</a> hinzufügen, erhalten Sie kostenlose LetsEncrypt SSL-Zertifikate!</p><p>Der einfachste Weg, Nginx Ingress in Ihrem Cluster einzusetzen, ist die Verwendung von Helm:</p><pre tabindex=0><code>helm upgrade --install ingress-nginx ingress-nginx \
  --repo https://kubernetes.github.io/ingress-nginx \
  --namespace ingress-nginx --create-namespace
</code></pre><p>Danach müssen Sie Cert Manager mit dem folgenden Befehl einsetzen, um sicherzustellen, dass https und SSL für Ihre Dienste laufen:</p><pre tabindex=0><code>helm install \
        cert-manager jetstack/cert-manager \
        --namespace cert-manager \
        --create-namespace \
        --set installCRDs=true
</code></pre><p>Dann müssen Sie einen &ldquo;ClusterIssuer&rdquo; erstellen, um LetsEncrypt mitzuteilen, wer Sie sind. Erstellen Sie eine Datei &ldquo;clusterissuer.yaml&rdquo; mit dem an Ihre E-Mail angepassten Inhalt:</p><pre tabindex=0><code>apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    server: https://acme-v02.api.letsencrypt.org/directory
#change to your email
    email: EMAIL
    privateKeySecretRef:
       name: letsencrypt-prod
    solvers:
    - http01:
        ingress:
          class: nginx # public or nginx depending on version
</code></pre><p>Danach wenden Sie es mit <code>kubectl apply -f clusterissuer.yaml</code> auf Ihren Cluster an und schon sind Sie startklar!</p><h3 id=erstellen-eines-ingress>Erstellen eines Ingress</h3><p>Nun müssen Sie den Namen Ihres Dienstes, den Sie der Welt zur Verfügung stellen wollen, ermitteln. Sie können ihn mit <code>kubectl get service</code> ermitteln.</p><p>In diesem Beispiel nehmen wir an, dass Ihr Dienst &ldquo;nginx&rdquo; im Standard-Namensraum heißt. Um Ihre Domain &ldquo;test.datafortress.cloud&rdquo; dorthin zu leiten, müssen Sie die folgende testdf-ingress.yaml erstellen:</p><pre tabindex=0><code>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ingress-nginx-test
  namespace: default
  annotations:
    cert-manager.io/cluster-issuer: &#34;letsencrypt-prod&#34;
spec:
  tls:
  - hosts:
#change to your domain
    - test.datafortress.cloud
    secretName: tls-secret
  rules:
#change to your domain
  - host: test.datafortress.cloud
    http:
      paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: nginx
              port:
                number: 80
</code></pre><p>Wenden Sie es mit <code>kubectl apply -f testdf-ingress.yaml</code> an und verweisen Sie die von Ihnen verwendete Domäne auf den von Ihrem Knoten verwendeten Load Balancer. Schon bald sollten Sie sehen, dass Ihr Cluster hochgefahren ist und Ihr Dienst auf der Domain läuft, die Sie im Ingress angegeben haben.
Zur Fehlersuche sehen Sie sich den nginx-Pod oder die Zertifikate an.
Haben Sie Probleme? <a href=/de/contact>Kontaktieren Sie uns</a> und wir werden Ihnen helfen!</p><p>Diese Lösung kann Ihnen zwar Geld für Ihre Cloud-Rechnung sparen, aber es ist wichtig zu wissen, dass der Verzicht auf Load Balancer mit einer Reihe von Problemen verbunden ist. Wenn zum Beispiel ein Knoten ausfällt, wird der Datenverkehr nicht automatisch an einen gesunden Server weitergeleitet, was zu Ausfallzeiten für Ihren Dienst führt. In vielen Fällen ist ein Load Balancer immer noch die beste Option, da er eine automatische Ausfallsicherung bietet und sicherstellt, dass Ihre Dienste für Ihre Kunden verfügbar bleiben. Es liegt an Ihnen, die Kosteneinsparungen gegen die potenziellen Risiken abzuwägen und eine fundierte Entscheidung für die beste Lösung für Ihre Bedürfnisse zu treffen.</p><h2 id=version-2-noch-mehr-geld-sparen-mit-0-load-balancern>Version 2: Noch mehr Geld sparen mit 0 Load Balancern!</h2><p>Wenn Sie noch mehr Geld bei Ihrer Cloud-Rechnung sparen möchten, gibt es eine Alternative zur obigen Lösung, die überhaupt keine Load Balancer verwendet! Anstatt Nginx Ingress zu verwenden, nutzt diese Lösung die nodePorts 80 und 443 auf dem Server, um den Datenverkehr an die entsprechenden Pods weiterzuleiten. Auf diese Weise werden keine Load Balancer benötigt, was Ihre Cloud-Kosten erheblich senken kann. Schauen wir uns nun die Details dieser Lösung an.</p><p>Dazu werden wir unseren bestehenden Nginx-Ingress so aufrüsten, dass er NodePorts anstelle von Load Balancern verwendet:</p><pre tabindex=0><code>helm upgrade --install ingress-nginx ingress-nginx/ingress-nginx
    --namespace ingress-nginx \
    --create-namespace \
    --set controller.service.type=NodePort \
    --set controller.service.ports.http=80 \
    --set service.annotations.&#34;metallb.universe.tf/address-pool&#34;=singlenode \
    --set controller.service.ports.https=443
</code></pre><p>Sie sollten bald sehen, dass Ihr ingress-nginx-Dienst zu Nodeport wechselt und der Load Balancer verschwindet.</p><p>Die Verwendung von Load Balancern sorgt zwar für die Stabilität eines Clusters, ist aber auch ein legitimer Weg, um bei Kubernetes-Distributionen mit einem Knoten Geld zu sparen. Durch den Wegfall von Load Balancern und die ausschließliche Nutzung der Node-Ports 80 und 443 können Sie Ihre monatlichen Kosten erheblich senken. Es ist jedoch wichtig zu bedenken, dass der Verzicht auf einen Load Balancer auch bedeutet, dass im Falle eines ausfallenden Knotens der Datenverkehr nicht automatisch an einen gesunden Server weitergeleitet wird. Wenn Sie eine Kubernetes-Distribution mit nur einem Knoten betreiben, ist dieser Kompromiss zwischen Stabilität und Kosteneinsparungen eine Überlegung wert.</p><h2 id=fazit-ist-es-das-wert>Fazit: Ist es das wert?</h2><p>Zusammenfassend lässt sich sagen, dass es mehrere Möglichkeiten gibt, in Ihrem Kubernetes-Cluster Kosten zu sparen, von der Verwendung von nur einem Load Balancer mit Nginx-Ingress bis hin zur Verwendung von 0 Load Balancern und dem Verlassen auf Nodeports. Ein Load Balancer hat zwar seine Vorteile, was die Stabilität und das Routing des Datenverkehrs angeht, aber es gibt auch Alternativen, die helfen können, die Kosten zu senken. Wenn Sie immer noch unsicher sind, wie Sie in Ihrem Kubernetes-Cluster am besten Geld sparen können, <a href=/de/contact>erwägen Sie die kostengünstigen gemeinsam genutzten Kubernetes-Cluster, die von DataFortress.cloud angeboten werden, oder lassen Sie sich von uns bei der Verwaltung Ihrer Clusterkosten unterstützen</a>.</p></section></div></div></article><section class=section><div class="columns is-centered"><div class="column max-800px"><div class=content><h2>You might also enjoy reading these articles</h2></div><div class=columns><div class="column is-one-third"><div class=card><a href=https://datafortress.cloud/de/blog/private-cloud-anbieter-vergleich/ title="Entdecken Sie die Vorteile und Funktionen der führenden Private-Cloud-Anbieter: SAP, OVH, OpenShift und DataFortress.cloud."><p>Entdecken Sie die Vorteile und Funktionen der führenden Private-Cloud-Anbieter: SAP, OVH, OpenShift und DataFortress.cloud.</p></a><p class=is-italic>Entfesseln Sie die Leistung von Private Clouds: Die wichtigsten Anbieter und ihre Angebote im Vergleich</p></div></div><div class="column is-one-third"><div class=card><a href=https://datafortress.cloud/de/blog/private-cloud-providers-comparison/ title="Entdecken Sie die Vorteile und Funktionen der führenden Private-Cloud-Anbieter: SAP, OVH, OpenShift, und DataFortress.Wolke."><p>Entdecken Sie die Vorteile und Funktionen der führenden Private-Cloud-Anbieter: SAP, OVH, OpenShift, und DataFortress.Wolke.</p></a><p class=is-italic>Entfesseln Sie die Leistung von Private Clouds: Die wichtigsten Anbieter und ihre Angebote im Vergleich</p></div></div><div class="column is-one-third"><div class=card><a href=https://datafortress.cloud/de/blog/kubernetes-without-load-balancer/ title="Entdecken Sie kostensparende Tipps für Ihren Kubernetes-Cluster, von der Verwendung eines Load Balancers bis hin zur völligen Abschaffung."><p>Entdecken Sie kostensparende Tipps für Ihren Kubernetes-Cluster, von der Verwendung eines Load Balancers bis hin zur völligen Abschaffung.</p></a><p class=is-italic>Maximierung der Kosteneinsparungen in der Cloud: Wie man Kubernetes ohne Load Balancer betreibt</p></div></div></div></div></div></section><aside class="columns is-centered"><div class="column max-800px"><div class=content><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//datafortess-cloud.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></aside></main><footer class=footer><div class="columns has-text-centered"><div class="column is-one-third is-narrow"><p>Social media</p></div><div class="column is-one-third is-narrow"><i class='fab fa-creative-commons' aria-hidden=true></i> This work is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank>Creative Commons Attribution-ShareAlike 4.0 International</a> License.</div><div class="column is-one-third is-narrow"><p>Powered by</p><a href=https://gohugo.io/ target=_blank><img src=https://datafortress.cloud/images/hugo-logo.png alt=Hugo width=64 height=12 title="Powered by Hugo"></a> &nbsp; &nbsp;
<a href=https://bulma.io/ target=_blank><img src=https://datafortress.cloud/images/made-with-bulma.png alt=Bulma width=64 height=16 title="Powered by Bulma CSS"></a>&nbsp; &nbsp;
<a href=https://www.gnu.org/software/emacs/ target=_blank><img src=https://datafortress.cloud/images/emacs-logo.png alt=Emacs width=16 height=16 title="Written in Emacs"></a></div></div></footer></body></html>