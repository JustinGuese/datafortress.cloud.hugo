<!doctype html><html><head><title>Maximizing Cost Savings in the Cloud: How to Run Kubernetes without a Load Balancer</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="index, follow"><meta name=description content="Discover cost-saving tips for your Kubernetes cluster, from using one load balancer to even eliminating them altogether."><link rel=canonical href=https://datafortress.cloud/blog/kubernetes-without-load-balancer/><link rel=alternate href=https://datafortress.cloud/blog/kubernetes-without-load-balancer/ hreflang=en-us><link rel=icon type=image/png href=https://datafortress.cloud/images/logo.webp><meta property="og:title" content="Maximizing Cost Savings in the Cloud: How to Run Kubernetes without a Load Balancer"><meta property="og:description" content="Discover cost-saving tips for your Kubernetes cluster, from using one load balancer to even eliminating them altogether."><meta property="og:type" content="article"><meta property="og:url" content="https://datafortress.cloud/blog/kubernetes-without-load-balancer/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-01-18T07:10:46+02:00"><meta property="article:modified_time" content="2023-02-10T18:23:48+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Maximizing Cost Savings in the Cloud: How to Run Kubernetes without a Load Balancer"><meta name=twitter:description content="Discover cost-saving tips for your Kubernetes cluster, from using one load balancer to even eliminating them altogether."><script type=application/ld+json>{"@context":"https://schema.org/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/datafortress.cloud\/blog\/kubernetes-without-load-balancer\/"},"headline":"Maximizing Cost Savings in the Cloud: How to Run Kubernetes without a Load Balancer","description":"Discover cost-saving tips for your Kubernetes cluster, from using one load balancer to even eliminating them altogether.","image":[],"datePublished":"2023-01-18T07:10:46\u002b02:00","dateModified":"2023-02-10T18:23:48\u002b01:00","author":{"@type":"Person","name":"Justin Guese"},"publisher":{"@type":"Organization","name":"Datafortress.cloud","logo":{"@type":"ImageObject","url":"https:\/\/datafortress.cloud\/images\/logo.webp"}}}</script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.1/css/all.css integrity=sha384-xxzQGERXS00kBmZW/6qxqJPyxW3UR0BPsL4c8ILaIWXva5kFi7TxkIIaMiKtqV1Q crossorigin=anonymous><link rel=stylesheet href=https://datafortress.cloud//css/style.css><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js></script></head><body><header><nav class=navbar><div class=navbar-brand><a class=navbar-item href=https://datafortress.cloud/ title=Datafortress.cloud><img src=https://datafortress.cloud/images/logo.webp alt="VR, Big-Data and Cloud for your Business."></a>
<a href=https://datafortress.cloud/ title="VR, Big-Data and Cloud for your Business." class=navbar-item><span class=is-size-4>Datafortress.cloud</span></a>
<a href=https://datafortress.cloud/contact class=navbar-item title="RSS feed"><span class="icon fa-lg has-text-dark"><i class="fa fa-envelope"></i></span></a>
<a href=https://datafortress.cloud/index.xml class=navbar-item title="RSS feed"><span class="icon fa-lg has-text-dark"><i class="fa fa-rss"></i></span></a>
<a role=button class=navbar-burger aria-label=menu aria-expanded=false><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div class="navbar-menu navbar-end"><a href=https://datafortress.cloud/products class=navbar-item>Products</a>
<a href=https://datafortress.cloud/services class=navbar-item>Services</a>
<a href=https://datafortress.cloud/project class=navbar-item>Portfolio</a>
<a href=https://datafortress.cloud/blog class=navbar-item>Blog</a>
<a href=https://datafortress.cloud/contact class=navbar-item>Contact</a>
<a href=https://datafortress.cloud/ class=navbar-item>about</a></div></nav><script>$(document).ready(function(){$(".navbar-burger").click(function(){$(".navbar-burger").toggleClass("is-active"),$(".navbar-menu").toggleClass("is-active")})})</script></header><main><article><div class="columns is-centered"><div class="column max-800px"><section class=section><h1 class="title is-2">Maximizing Cost Savings in the Cloud: How to Run Kubernetes without a Load Balancer</h1><div class="columns is-tablet"><div class="columns is-mobile"><div class="column is-narrow"><figure class="image is-64x64"><img class=is-rounded src=https://datafortress.cloud/images/logo.webp alt="Justin Guese" title="Justin Guese"></figure></div><div class=column><p>Justin Guese |
<time datetime=2023-01-18>18 January 2023</time><br><time datetime=2023-02-10><span class=has-text-grey-light>Last Updated | 10 February 2023</span></time><br><span class=has-text-grey-light>951 words | 5 minutes</span></p></div></div></div><div class="tags is-pulled-left"><a class="tag is-primary" href=https://datafortress.cloud/categories/private-cloud/>Private cloud</a></div><div class="tags is-pulled-right"><a class="tag is-info" href=https://datafortress.cloud/tags/private-cloud/>private cloud</a>
<a class="tag is-info" href=https://datafortress.cloud/tags/comparison/>comparison</a></div></section><section class=content><h1 id=maximizing-cost-savings-in-the-cloud-how-to-run-kubernetes-without-a-load-balancer>Maximizing Cost Savings in the Cloud: How to Run Kubernetes without a Load Balancer</h1><p>When it comes to running Kubernetes in the cloud, one of the most significant costs can come from using a load balancer for each service. With prices starting at around $15 per month per load balancer, it&rsquo;s easy for costs to quickly add up, especially if you have a large number of pods. However, what if we told you that there&rsquo;s a way to run Kubernetes without the need for a load balancer and still get the benefits of high availability and automatic failover? In this article, we&rsquo;ll explore how you can achieve cost savings in the cloud by running Kubernetes without a load balancer.</p><h2 id=version-1-nginx-ingress-with-cert-manager-to-just-use-one-load-balancer>Version 1: Nginx Ingress with Cert Manager to just use one Load Balancer</h2><p>One cost-saving strategy is to use only one load balancer for the entire cluster, rather than a separate load balancer for each service. This can be achieved by using an <a href=https://kubernetes.github.io/ingress-nginx/>Nginx Ingress</a>, which acts as a single entry point for all external traffic to the cluster. The Nginx Ingress then distributes the traffic to the appropriate pods based on the domain name, instead of creating one load balancer per service.
The best part: If you are adding <a href=https://cert-manager.io/docs/installation/helm/>cert manager</a>, you will get free LetsEncrypt SSL certificates!</p><p>The easiest way to deploy the Nginx Ingress in your cluster, is by using Helm:</p><pre tabindex=0><code>helm upgrade --install ingress-nginx ingress-nginx \
  --repo https://kubernetes.github.io/ingress-nginx \
  --namespace ingress-nginx --create-namespace
</code></pre><p>After that, to ensure https and SSL running for your services, you need to deploy Cert Manager with the following command:</p><pre tabindex=0><code>helm install \
        cert-manager jetstack/cert-manager \
        --namespace cert-manager \
        --create-namespace \
        --set installCRDs=true
</code></pre><p>Then, you need to create a &ldquo;ClusterIssuer&rdquo; in order to tell LetsEncrypt who you are. Create a file &ldquo;clusterissuer.yaml&rdquo; with the content adapted to your Email:</p><pre tabindex=0><code>apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    server: https://acme-v02.api.letsencrypt.org/directory
#change to your email
    email: EMAIL
    privateKeySecretRef:
       name: letsencrypt-prod
    solvers:
    - http01:
        ingress:
          class: nginx # public or nginx depending on version
</code></pre><p>After that, apply it to your cluster with <code>kubectl apply -f clusterissuer.yaml</code> and you are set up!</p><h3 id=creating-an-ingress>Creating an Ingress</h3><p>Now, you need to grab the name of your service that you want to expose to the world. You can get it with <code>kubectl get service</code>.</p><p>In this example, let&rsquo;s assume your service is named &ldquo;nginx&rdquo; in the default namespace. To route your domain &ldquo;test.datafortress.cloud&rdquo; to it, you need to create the following testdf-ingress.yaml:</p><pre tabindex=0><code>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ingress-nginx-test
  namespace: default
  annotations:
    cert-manager.io/cluster-issuer: &#34;letsencrypt-prod&#34;
spec:
  tls:
  - hosts:
#change to your domain
    - test.datafortress.cloud
    secretName: tls-secret
  rules:
#change to your domain
  - host: test.datafortress.cloud
    http:
      paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: nginx
              port:
                number: 80
</code></pre><p>Apply it with <code>kubectl apply -f testdf-ingress.yaml</code>, and point the domain you used to the load balancer used by your node. Soon you should see it spin up in your cluster, and see your service at the domain you stated in the ingress.
To debug, have a look at the nginx pod or certificates.
Struggling? <a href=/contact>Contact us</a> and we will help you out!</p><p>While this solution may save you money on your cloud bill, it&rsquo;s important to note that using no load balancers can come with its own set of challenges. For example, if a node fails, the traffic won&rsquo;t be automatically routed to a healthy server, leading to downtime for your service. In many cases, having a load balancer is still the best option as it provides automatic failover and ensures that your services remain available to your customers. It&rsquo;s up to you to weigh the cost savings against the potential risks and make an informed decision on the best solution for your needs.</p><h2 id=version-2-saving-even-more-money-with-0-load-balancers>Version 2: Saving even more money with 0 load balancers!</h2><p>If you&rsquo;re looking to save even more money on your cloud bill, there&rsquo;s an alternative to the above solution that uses no load balancers at all! Instead of using Nginx Ingress, this solution utilizes the nodePorts 80 and 443 on the server to redirect traffic to the appropriate pods. This eliminates the need for any load balancers, which can significantly reduce your cloud costs. Let&rsquo;s dive into the details of this solution.</p><p>To do this, we will upgrade our existing nginx ingress to use NodePorts instead of Load Balancers:</p><pre tabindex=0><code>helm upgrade --install ingress-nginx ingress-nginx/ingress-nginx
    --namespace ingress-nginx \
    --create-namespace \
    --set controller.service.type=NodePort \
    --set controller.service.ports.http=80 \
    --set service.annotations.&#34;metallb.universe.tf/address-pool&#34;=singlenode \
    --set controller.service.ports.https=443
</code></pre><p>You should soon see your ingress-nginx service to switch to Nodeport, and the load balancer should disappear.</p><p>While using load balancers provides stability to a cluster, it is a legitimate way to save money with one-node Kubernetes distributions. By eliminating the need for load balancers and relying solely on the node ports 80 and 443, you can reduce your monthly costs significantly. However, it&rsquo;s important to keep in mind that not having a load balancer also means that in case of a failing node, the traffic will not be automatically routed to a healthy server. If you are operating a one-node Kubernetes distribution, this trade-off between stability and cost savings is worth considering.</p><h2 id=verdict-is-it-worth-it>Verdict: Is it worth it?</h2><p>In conclusion, there are multiple ways to save costs in your Kubernetes cluster, from using only one load balancer with nginx ingress to using 0 load balancers and relying on nodeports. While a load balancer has its benefits in terms of stability and ensuring traffic routing, there are alternatives that can help reduce costs. If you&rsquo;re still unsure of the best way to save money in your Kubernetes cluster, <a href=/contact>consider taking advantage of the cost-effective shared Kubernetes clusters offered by DataFortress.cloud, or seek our assistance in managing your cluster costs</a>.</p></section></div></div></article><section class=section><div class="columns is-centered"><div class="column max-800px"><div class=content><h2>You might also enjoy reading these articles</h2></div><div class=columns><div class="column is-one-third"><div class=card><a href=https://datafortress.cloud/blog/private-cloud-providers-comparison/ title="Discover the benefits and features of top private cloud providers: SAP, OVH, OpenShift, and DataFortress.cloud."><p>Discover the benefits and features of top private cloud providers: SAP, OVH, OpenShift, and DataFortress.cloud.</p></a><p class=is-italic>Unleashing the Power of Private Clouds: Comparing the Top Providers and Their Offerings</p></div></div><div class="column is-one-third"><div class=card><a href=https://datafortress.cloud/blog/key-legal-considerations-for-data-processing-in-germany-an-overview-for-enterprises/ title="In this article, we provide an overview of key legal considerations for data processing in Germany, including consent, retention, and data protection regulations."><p>In this article, we provide an overview of key legal considerations for data processing in Germany, including consent, retention, and data protection regulations.</p></a><p class=is-italic>Key Legal Considerations for Data Processing in Germany An Overview for Enterprises</p></div></div><div class="column is-one-third"><div class=card><a href=https://datafortress.cloud/blog/kubernetes-monitoring-how-to-track-performance-and-troubleshoot-issues/ title="In this article, we'll explore essential tips and best practices for monitoring Kubernetes and tracking performance, as well as top strategies for troubleshooting issues that may arise in your environment.."><p>In this article, we'll explore essential tips and best practices for monitoring Kubernetes and tracking performance, as well as top strategies for troubleshooting issues that may arise in your environment..</p></a><p class=is-italic>Kubernetes monitoring: How to track performance and troubleshoot issues</p></div></div></div></div></div></section><aside class="columns is-centered"><div class="column max-800px"><div class=content><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//datafortess-cloud.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></aside></main><footer class=footer><div class="columns has-text-centered"><div class="column is-one-third is-narrow"><p>Social media</p></div><div class="column is-one-third is-narrow"><i class='fab fa-creative-commons' aria-hidden=true></i> This work is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank>Creative Commons Attribution-ShareAlike 4.0 International</a> License.</div><div class="column is-one-third is-narrow"><p>Powered by</p><a href=https://gohugo.io/ target=_blank><img src=https://datafortress.cloud/images/hugo-logo.png alt=Hugo width=64 height=12 title="Powered by Hugo"></a> &nbsp; &nbsp;
<a href=https://bulma.io/ target=_blank><img src=https://datafortress.cloud/images/made-with-bulma.png alt=Bulma width=64 height=16 title="Powered by Bulma CSS"></a>&nbsp; &nbsp;
<a href=https://www.gnu.org/software/emacs/ target=_blank><img src=https://datafortress.cloud/images/emacs-logo.png alt=Emacs width=16 height=16 title="Written in Emacs"></a></div></div></footer></body></html>