---
author: जस्टिन गुएसे
bg_image: images/blog/Archlinux_GNOME_3.2.png
categories:
- लिनक्स
- ट्यूटोरियल
date: '2020-07-06T07:10:46+02:00'
description: Arch Linux को एन्क्रिप्टेड ड्राइव्स के साथ आसान तरीके से इंस्टॉल करना
image: images/blog/Archlinux_GNOME_3.2.png
tags:
- tutorial
- arch linux
- deep learning
- reinforcement learning
- linux
- encryption
- encypt data at rest
title: कैसे करें - एन्क्रिप्टेड ड्राइवों के साथ आर्क लिनक्स को आसान तरीके से इंस्टॉल
  करना
type: post

---
## आर्क लिनक्स के लाभ

मेरे पिछले पोस्ट में, [“How To: Ditching Ubuntu in favor of Arch Linux for a Deep Learning Workstation”](//www.datafortress.cloud/blog/howto-arch-linux-deeplearning-workstation/), मैंने समझाया था कि मैंने अपनी मशीन लर्निंग वर्कस्टेशन के लिए उबंटू से आर्क लिनक्स क्यों बदला। संक्षेप में, इसका मुख्य कारण गति है, क्योंकि आर्क हार्डवेयर के बहुत करीब है और इसलिए बहुत तेज है, कम ब्लोटवेयर है और इसलिए कम रैम का उपयोग होता है जिसकी मुझे मशीन लर्निंग के लिए आवश्यकता है, और अद्भुत पैकमैन और AUR पैकेज जो तेज़ और आसानी से इंस्टॉल हो सकते हैं।

उदाहरण के लिए, उबंटू में, डीप लर्निंग के लिए टेंसोरफ्लो और CUDA को काम करना काफी मुश्किल है, क्योंकि डेबियन पैकेज संरचना अलग है और आर्क की तुलना में इंस्टॉलेशन धीमा है। आर्क में, निर्भरताओं को अच्छी तरह से संभाला जाता है, और पैकेज उतने अमूर्त नहीं होते हैं क्योंकि आर्क मूल रूप से "शुद्ध" लिनक्स कर्नेल ही है।

इसके अतिरिक्त, पैकेज बहुत तेज़ी से आ रहे हैं, और आर्कविकी को किसी भी ऑपरेटिंग सिस्टम के लिए सबसे व्यापक दस्तावेज़ीकरण कहा जाता है।

आर्क का आदर्श वाक्य "सब कुछ अनुकूलित करें, और जितना हो सके तेज़ बनें" है, जबकि उबंटू का आदर्श वाक्य "नए उपयोगकर्ताओं के लिए इंस्टॉलेशन और उपयोग को यथासंभव आसान बनाना" होगा। अब, मैं कहना नहीं चाहता कि उबंटू खराब है, क्योंकि समुदाय बहुत बड़ा है, और यह लिनक्स की दुनिया में अपनी यात्रा शुरू करने के लिए एकदम सही डिस्ट्रो है, लेकिन एक बार जब आप लिनक्स के अधिक अभ्यस्त हो जाते हैं और अधिक गति की आवश्यकता होती है, तो आर्क शायद सबसे अच्छा अगला कदम हो सकता है।

मैं कम से कम आर्क से खुश हूँ, क्योंकि यह मेरे द्वारा पहले देखे गए किसी भी चीज़ से बहुत तेज है, और मैं सब कुछ अनुकूलित कर सकता हूँ।

मैंने अपने डीप लर्निंग बिल्ड के लिए एक आसान इंस्टॉलेशन के लिए एक आईएसओ या इमेज प्रदान करने के बारे में सोचा है। यदि आप रुचि रखते हैं तो कृपया टिप्पणी करें या मुझे एक संदेश भेजें।

इसके अतिरिक्त, यदि आप थोड़ी सी अमूर्त परत [मैनजैरो आर्क](//manjaro.org/) से सहमत हैं, तो यह आपके लिए एक अच्छा विकल्प हो सकता है। यह मूल रूप से आर्क है, लेकिन इसे आसान और उपयोगकर्ता के अनुकूल बनाया गया है। मुझे यह बहुत पसंद आया, लेकिन मैनजैरो अपने स्वयं के पैकेज का उपयोग करता है, जो अभी भी अच्छे हैं, लेकिन "शुद्ध" आर्क पैकेजों की तरह नहीं हैं। यदि आप कोई शक्तिशाली उपयोगकर्ता नहीं हैं, तो यह आपके लिए विकल्प हो सकता है।


## आसान तरीके से आर्क लिनक्स कैसे स्थापित करें

जबकि आर्क द्वारा प्रदान किया गया [प्रारंभिक मार्गदर्शिका](//wiki.archlinux.org/index.php/installation_guide) पहले से ही काफी अच्छा है, यह नए लोगों के लिए भ्रामक हो सकता है। इसीलिए मैंने अपना खुद का ट्यूटोरियल लिखने का फैसला किया है।

मेरा लक्ष्य एन्क्रिप्टेड ड्राइव के साथ आर्क स्थापित करना था, क्योंकि मुझे अपने ग्राहकों के लिए आराम पर डेटा सुरक्षित करने की आवश्यकता है।

### 1. आर्क लिनक्स इमेज डाउनलोड करना

https://www.archlinux.org/download/ पर जाएं और इमेज डाउनलोड करें।

इसे USB स्टिक में लिखें। उदाहरण के लिए (लेकिन आप अपना प्रोग्राम इस्तेमाल कर सकते हैं):

लिनक्स:
> dd if=ISOFILE of=/dev/sdX status=progress

जहाँ sdX आपकी USB स्टिक है। इसे "lsblk" से जांचें।

विंडोज़ / मैक:
मुझे Etcher https://www.balena.io/etcher/ का इस्तेमाल करना पसंद आया।

अपने बूट मेनू (ज्यादातर मामलों में F11, F12) का उपयोग करके USB स्टिक में बूट करें।

### 2. लाइव आईएसओ में पहला सेटअप

एक बार जब आप आर्क के लाइव आईएसओ में होते हैं, तो आपको आर्क की बुनियादी कमांड लाइन दिखाई देनी चाहिए।

**क्या आपकी कीबोर्ड यूएस कीबोर्ड नहीं है?** अपने की-मैप से लोड करें:
> loadkeys KEYMAP

जहाँ Keymap आपका लोकल है। अपने लोकल को प्राप्त करें:

> localectl list-keymaps | grep -i SEARCHTERM

उदाहरण के लिए, SEARCHTERM = जर्मनी के साथ उपरोक्त कमांड का उपयोग करने पर de-latin1 प्राप्त होता है, जिसके लिए loadkeys कमांड है:
> loadkeys de-latin1


(वैकल्पिक) यदि आपके पास इथरनेट नहीं है, तो आपको निम्नलिखित कमांड के साथ अपने वाईफाई से कनेक्ट होना पड़ सकता है। WIFINETWORK और WIFIPASSWORD को अपने वाईफाई नाम और पासवर्ड से बदलें।

> wpa_passphrase 'WIFINETWORK’ 'WIFIPASSWORD' >> /etc/wpa_supplicant/wpa_supplicant.conf \
> wpa_supplicant -Bc /etc/wpa_supplicant/wpa_supplicant.conf -i 'wlan0' \
यदि दूसरा कमांड काम नहीं करता है, तो आपका वाईफाई डिवाइस नाम अलग हो सकता है। आप इसे "ifconfig" से जाँच सकते हैं।
> dhclient

अपनी कनेक्शन की जांच करें। यदि प्रतिक्रिया HTML जैसी दिखती है तो आप कनेक्टेड हैं, यदि यह "404", "टाइम आउट" या "कोई कनेक्शन नहीं" जैसा कुछ कहता है, तो उपरोक्त चरणों को दोहराएं और टाइपो के लिए देखें।
> curl www.datafortress.cloud

### 2. ड्राइव को विभाजित करना

यह सबसे कठिन चरण है, इसलिए एक बार जब आप इसे कर लेते हैं तो आप लगभग इसे पूरा कर लेते हैं! मैंने उन्नत सुरक्षा के लिए पूरी ड्राइव को पूरी तरह से एन्क्रिप्ट किया हुआ चुन लिया, लेकिन यदि चाहें तो आप “[मानक विधि](//wiki.archlinux.org/index.php/Partitioning)” का भी उपयोग कर सकते हैं।

यह गाइड मान लेता है कि आप अपनी पूरी ड्राइव को साफ करने की योजना बना रहे हैं। इसलिए सुनिश्चित करें कि सभी डेटा का बैकअप लिया गया है। बेशक, विंडोज़ या अन्य के साथ डुअल बूट भी संभव है, लेकिन मैं इसे दूसरे गाइड में समझाऊँगा।

योजना दो पार्टीशन रखने की है:
पहला विभाजन: EFI बूट डिस्क - जो आपके पीसी को आर्क में बूट करने के तरीके को बताता है।
दूसरा विभाजन: पूरी तरह से एन्क्रिप्टेड ड्राइव जिसमें "उप"-ड्राइव होती हैं जिनमें स्वैप फ़ाइल, रूट फ़ोल्डर और सुरक्षा के लिए एक अलग /होम ड्राइव होती है।
दूसरी ड्राइव पर तीन विभाजन क्यों? मान लें कि आप अपने रूट इंस्टॉलेशन में गड़बड़ी करते हैं। उस मामले में, आपके दस्तावेज़, सेटिंग्स और इतने पर आपके होम फ़ोल्डर एक अलग विभाजन पर होंगे और आसानी से नए इंस्टॉलेशन में पुन: उपयोग किए जा सकते हैं। इसका मतलब है कि आप रूट विभाजन में एक नया आर्क इंस्टॉल कर सकते हैं और बस अपने होम फ़ोल्डर को “पुन: उपयोग” कर सकते हैं। अच्छा।


#### चरण 1: अपनी ड्राइव का नाम प्राप्त करना

> lsblk -lh

यह आपको सभी कनेक्टेड ड्राइव दिखाता है। आमतौर पर आपकी मुख्य ड्राइव का नाम /dev/sda और आपकी USB स्टिक /dev/sdb होना चाहिए।

**यदि sda वास्तव में आपकी मुख्य ड्राइव है, तो उसकी GB संग्रहण क्षमता और सब कुछ के अनुसार जांचें। यदि आप केवल निम्नलिखित कमांड को sda के साथ कॉपी और पेस्ट करते हैं, तो आप गलत ड्राइव को मिटा सकते हैं!!** यही कारण है कि मैं निम्नलिखित पैराग्राफ में डिवाइस sdX का नाम दूँगा, लेकिन X को अपने डिवाइस नंबर (a, b, c, ...) से बदलें। कुछ ड्राइव के अलग-अलग नाम होते हैं, बस तुलना करें और उसी अनुसार बदलें।


#### चरण 2: विभाजन

gdisk प्रारंभ करें

> gdisk /dev/sdX

EFI ड्राइव सेटअप
1. पार्टीशन टेबल बनाने के लिए 'o' टाइप करें
2. नए पार्टीशन के लिए 'n' टाइप करें
3. दर्ज करें
4. दर्ज करें
5. +256M
6. EF00
यह EFI प्रारूप के साथ 256 एमबी पार्टीशन बनाएगा जिसकी हमें बूटिंग के लिए आवश्यकता है।

एंक्रिप्टेड आर्क ड्राइव सेटअप
1. नए पार्टीशन बनाने के लिए 'n' टाइप करें
2. दर्ज करें
3. दर्ज करें
4. दर्ज करें
5. 8309

यह देखने के लिए कि सब कुछ सही लग रहा है, 'p' दबाएं। यह इस तरह दिखना चाहिए:

>Number  Start (sector)    End (sector)  Size       Code  Name \
>   1            2048         1050623   256.0 MiB   EF00  EFI System \
>   2         1050624       242187466   115.0 GiB   8309  Linux LUKS

ठीक लग रहा है? डिस्क में परिवर्तन लिखने के लिए 'w' दबाएँ।


### 3. एन्क्रिप्टेड फ़ाइल सिस्टम बनाएँ

पार्टीशन अभी खाली हैं। अगला हम फ़ाइल सिस्टम और एन्क्रिप्टेड "उप"-विभाजन बनाएँगे। X को अपने ड्राइव नंबर (आमतौर पर a) से बदलना याद रखें।

> cryptsetup luksFormat /dev/sdX2 \
> cryptsetup open /dev/sdX2 cryptlvm \
> pvcreate /dev/mapper/cryptlvm \
> vgcreate datafortress /dev/mapper/cryptlvm

अपनी इच्छित साइज़ से गीगाबाइट के आगे निम्न ड्राइव साइज़ को बदलने में संकोच न करें। डीप लर्निंग के लिए स्वैप 32 जीबी होना चाहिए, अन्य मामलों में आपके रैम का आकार। मैं रूट सिस्टम को 40 जीबी रखने की सलाह दूंगा, लेकिन न्यूनतम 10 जीबी होना चाहिए।
आप datafortress को किसी भी चीज़ से बदल सकते हैं या वैसे ही रख सकते हैं ताकि आप शहर में कूल किड बनें।


> lvcreate -L 16G datafortress -n swap \
> lvcreate -L 40G datafortress -n root \
> lvcreate -l +100%FREE datafortress -n home

फ़ाइल सिस्टम बनाएँ

> mkfs.vat -F32 /dev/sdX1 \
> mkfs.ext4 /dev/mapper/datafortress-root \
> mkfs.ext4 /dev/mapper/datafortress-home \
> mkswap /dev/mapper/datafortress-swap

उनको माउंट करें

> mount /dev/mapper/datafortress-root /mnt \
> mkdir /mnt/home \
> mkdir /mnt/boot \
> mount /dev/mapper/datafortress-home /mnt/home \
> mount /dev/sdX1 /mnt/boot \
> swapon /dev/mapper/datafortress-swap

### 4. बेस लिनक्स इंस्टॉल करें

इंस्टॉल करने से पहले, अपने मिररलिस्ट को अपडेट करने की सलाह दी जाती है ताकि पैकेज निकटतम मिरर से डाउनलोड किए जा सकें। [कृपया मेरे दूसरे लेख में "रिफ्लेक्टर" खोजें, ताकि यह कैसे करें, इसकी निर्देशिका मिल सके](//www.datafortress.cloud/blog/howto-arch-linux-deeplearning-workstation/).

> pacstrap /mnt base base-devel linux linux-firmware nano

### 5. Fstab स्थापित करें

Fstab मूल रूप से यह बताने के निर्देश हैं कि आपकी ड्राइव को कैसे माउंट किया जाए। अभी के लिए इसे कॉपी-पेस्ट करें।

> genfstab -U /mnt >> /mnt/etc/fstab


### 6. अंतिम पॉलिशिंग टच

हम अपने माउंट पर chroot करने जा रहे हैं, जो मूल रूप से हमारे सिस्टम में sudo चलाने जैसा है।

> arch-chroot /mnt \
> ln -s /usr/share/zoneinfo/REGION/CITY /etc/localtime

REGION आपके क्षेत्र (यदि आप /usr/…./zoneinfo/ लिखते हैं तो विकल्प देखने के लिए टैब का उपयोग करें, जैसे यूरोप, और CITY आपका शहर, जैसे वियना)।

> hwclock --systohc


अपना होस्टनाम सेट करें। आर्क इंस्टॉल करते समय मज़ेदार हिस्सा यह है कि आपको उबंटू और अन्य चीजें करते हैं जो आपके लिए कर देते हैं। अपने डिवाइस का होस्टनेम सेट करें, उदाहरण के लिए, यदि आप बाद में अपने डिवाइस में ssh करना चाहते हैं, तो आपको कोई आईपी टाइप करने की आवश्यकता नहीं है, बल्कि आप इसके नाम का उपयोग कर सकते हैं। उदाहरण के लिए, “ssh user@hunneybunney” 192.168.0.231 की तुलना में याद रखने में बहुत आसान है।

> echo NAME > /etc/hostname

अगला, हम अपना लोकल सेट कर रहे हैं, मूल रूप से सिस्टम भाषा। फ़ाइल को नैनो में खोलें और अपनी भाषा कोड खोजें। यदि संभव हो तो UTF-8 संस्करण का उपयोग करें। नैनो का उपयोग करके खोज करना संभव है, स्ट्रिंग + डब्ल्यू का उपयोग करें। [नैनो ट्यूटोरियल](//www.howtogeek.com/howto/42980/the-beginners-guide-to-nano-the-linux-command-line-text-editor/).
उदाहरण के लिए, मैं जर्मन और अंग्रेज़ी (यूएस) चाहता था, इसलिए मैंने en_US.UTF-8 UTF-8 और de_DE.UTF-8 UTF-8 को अनकॉमेंट किया।\
> nano /etc/locale.gen

लोकेल्स उत्पन्न करो\
> locale-gen

(वैकल्पिक) अब यदि आप गैर-यूएस कीबोर्ड का उपयोग कर रहे हैं, तो अपना की-मैप जोड़ें:

> echo KEYMAP > /etc/vconsole.conf

उस Keymap का उपयोग करें जिसके बारे में हमने शुरुआत में बात की थी, जैसे de-latin1

अगला कुछ सॉफ्टवेयर इंस्टॉल करें। यदि आप पहले से ही उस pacman पैकेज को जानते हैं जिसे आप इंस्टॉल करना चाहते हैं, तो इसे अभी करें। मैं पहले न्यूनतम पैकेज के साथ ही शुरुआत करने की अनुशंसा करता हूँ और फिर सब कुछ ठीक से काम करने पर पैकेज स्थापित करना जारी रखें।

**न्यूनतम**
> pacman -Syu \
> pacman -S wpa_supplicant dhclient lvm2 dialog

**डेस्कटॉप वातावरण स्थापित करना**
किसी डेस्कटॉप वातावरण को पहले से ही इंस्टॉल करने में संकोच न करें, जो आपको सबकुछ का GUI देता है।

डिस्प्ले मैनेजर स्थापित करें
> pacman -S lightdm

अब आर्क के लाभ यह है कि आप अपना खुद का डेस्कटॉप वातावरण चुनते हैं। लुक के लिए गनोम चुनें, लेकिन यह रैम का भूखा होगा, दक्षता के लिए एक्सफेज चुनें।

**निम्नलिखित में से केवल एक स्थापित करें**

GNOME स्थापित करने के लिए:

> pacman -S gnome gnome-extra

सिनिमाॉन स्थापित करने के लिए:

> pacman -S cinnamon nemo-fileroller

XFCE स्थापित करने के लिए:

> pacman -S xfce4 xfce4-goodies

KDE स्थापित करने के लिए:

>pacman -S plasma

MATE स्थापित करने के लिए:

> pacman -S mate mate-extra

### 7. उपयोगकर्ता जोड़ना

मैं रूट और डिफ़ॉल्ट उपयोगकर्ता के लिए अलग-अलग पासवर्ड का उपयोग करने की सलाह देता हूँ।

> useradd -m -G wheel ‘USERNAME’ \
> passwd ‘USERNAME’

रूट उपयोगकर्ता के लिए पासवर्ड बनाएँ

> passwd


आप अपने डिफ़ॉल्ट उपयोगकर्ता के साथ लॉगिन करेंगे। यदि आपको व्यवस्थापकीय कार्य करने की आवश्यकता है, तो आप “su - root” से उपयोगकर्ता बदल सकते हैं।

### 8. बूट कॉन्फ़िगरेशन

अब बहुत सारे बूट मैनेजर हैं, लेकिन मुझे systemd बूट लोडर सबसे ज़्यादा पसंद आया। [अन्य विकल्प चुनने में संकोच न करें](//wiki.archlinux.org/index.php/Category:Boot_loaders)।

> nano /etc/mkinitcpio.conf

HOOKS लाइन खोजें और उसे उसी अनुक्रम में संपादित करें। क्रम मायने रखता है!

> HOOKS=(base udev autodetect keyboard keymap consolefont modconf block encrypt lvm2 filesystems resume fsck)

फ़ाइल को बंद और सहेजें (Strg + X, y)।

> mkinitcpio -p linux \
> bootctl install


अपने बूट प्रविष्टियाँ संपादित करें

आपको एन्क्रिप्टेड ड्राइव का पार्टीशन आईडी की आवश्यकता होगी। आमतौर पर यह /dev/sda2 होगा, लेकिन अलग भी हो सकता है। यह पहला 256 एमबी ड्राइव नहीं होगा, क्योंकि यह बूट पार्टीशन है।

नाम खोजें और इसे नोट करें, ज़्यादातर संभावना /dev/sda2 है।

> lsblk -lh

फिर निम्न कमांड के आउटपुट में UUID स्ट्रिंग की तलाश करें:\
/dev/sdX2 डिवाइस आईडी पर

> blkid

आप एक फ़िल्टर के साथ भी उसी कमांड की कोशिश कर सकते हैं:

> blkid | grep UUID=

उदाहरण UUID: 727cac18-044b-4504-87f1-a5aefa774bda


> nano /boot/loader/entries/arch.conf
निम्नलिखित जोड़ें:

>title	ArchLinux \
>linux	/vmlinuz-linux \
>initrd	/initramfs-linux.img \
>options cryptdevice=UUID=<YOUR-PARTITION-UUID>:lvm:allow-discards resume=/dev/mapper/datafortress-swap root=/dev/mapper/datafortress-root rw quiet

यदि आपने datafortress को बदल दिया है तो datafortress को आपके द्वारा चुने गए आईडी से बदलना याद रखें। नहीं तो वैसे ही छोड़ दें।

### 9. लॉक करना

हो गया! अब रिबूट करें, यूएसबी स्टिक निकालें और उम्मीद करें कि सब कुछ ठीक से काम किया।

> exit \
> umount -R /mnt \
> reboot

**[मैं एलटीएस कर्नेल सेट अप करने की सलाह देता हूँ, क्योंकि वे अधिक स्थिर होते हैं, और मिररलिस्ट को अपडेट करें। अधिक जानकारी के लिए मेरे "आर्क लिनक्स डीप लर्निंग स्टेशन बनाना" गाइड देखें](//www.datafortress.cloud/blog/howto-arch-linux-deeplearning-workstation/).**
